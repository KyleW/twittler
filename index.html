<!DOCTYPE html>
<html>
<head>
	<script src="jquery.js"></script>
	<script src="data_generator.js"></script>
</head>
<body>
	<h2>Timeline</h2>
	<div id='timeline'></div>
	<br>
	<h2>Tweets</h2>
	<div id='main'></div>
	<br>
	<button>Check for more tweets</button>

	<script>


		$(document).ready(function(){

      	//Given JS to display list of tweets
      	var $body = $('#main');
      	$body.html('');
      	var index = streams.home.length - 1;
      	while(index >= 0){
      		var tweet = streams.home[index];
      		var $tweet = $('<div></div>');
      		$tweet.text('@' + tweet.user + ': ' + tweet.message+' ['+tweet.created_at+"]").data({'user':tweet.user});    	  
      		$tweet.appendTo($body);
      		index -= 1;
      	}

        // Display new tweets after page is loadded on button press
        $('button').on('click',function(){
        	debugger;
        	var current = $('#main div').length;
        	var available = streams.home.length; 
        	if (current < available){
		      	while(current < available){
		      		var tweet = streams.home[current];
		      		var $tweet = $('<div></div>');
		      		$tweet.text('@' + tweet.user + ': ' + tweet.message+' ['+tweet.created_at+"]").data({'user':tweet.user});    	  
		      		$tweet.prependTo($body);
		      		current += 1;
		      	}
        	}
        });

        // Clicking on a tweet
        $('#main').on('click','div',function(){
      	  var tlUser = $(this).data("user");
      	  var $timeline = $('#timeline');
      	  $timeline.html('');
      	  var index = streams.home.length - 1;
	      	while(index >= 0){
	      		var tweet = streams.home[index];
	      		if (tweet.user === tlUser){
	      			var $tweet = $('<div></div>');
	      		  $tweet.text('@' + tweet.user + ': ' + tweet.message+' ['+tweet.created_at+"]").data({'user':tweet.user});    	  
	      		  $tweet.appendTo($timeline);
	      		}
	      		index -= 1;
	      	}      	
      	});

      });

			

			


</script>


</body>
</html>
